TITLE

; Name: Usman Farooqi
; Date: Feb-07-2021
; ID: 105219637
; Description: Comp 2660 LabAssignment3

INCLUDE Irvine32.inc
INCLUDELIB Irvine32.lib

; please comment these lines if you are running in Visual Studios, they were needed for linux
INCLUDELIB kernel32.lib
INCLUDELIB user32.lib

.data
    val1 SDWORD 8
    val2 SDWORD -15
    val3 SDWORD 20
    
    Uarray WORD 1000h, 2000h, 3000h, 4000h
    Sarry SWORD -1, -2, -3, -4
.code
main PROC
    mov eax, val2 ; FFFFFFF1
    neg eax ; 0000000F
    add eax, 7 ; 00000016h
    sub eax, val3 ; 00000002h
    add eax, val1 ; 0000000Ah
    call WriteInt
    
    call dumpregs
    
    sub eax, eax ; clearing eax register
    mov ax, Uarray ; value of eax = 1000h
    sub ebx, ebx ; clearing ebx register
    mov bx, [Uarray + 2] ; value of ebx = 2000h
    sub ecx, ecx ; clearing ecx register
    mov cx, [Uarray + 4] ; value of ecx = 3000h
    sub edx, edx ; clearing edx register
    mov dx, [Uarray + 6] ; value of edx = 4000h
    call dumpregs

    ; use movsx to fill upper half of eax with signed bit of Sarray
    movsx eax, Sarry 
    movsx ebx, [Sarry + 2] 
    movsx ecx, [Sarry + 4]
    movsx edx, [Sarry + 6]
    call dumpregs

	exit

main ENDP
END main

